<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Kern HW3</title>
  <script src="http://d3js.org/d3.v4.min.js" charset="utf-8"></script>
  <style>
    .bar-obesity {
      background-color: orangered;
      display: inline-block;
      width: 20px;
      height: 40px;
      margin: 0px 2px 0px 0px;
    }

  </style>
</head>

<body>
  <script type="text/javascript">
    //create svg
    var svg = d3.select("body")
      .append("svg")
      .attr("width", 500)
      .attr("height", 500);
    
    

    //load in csv data
    d3.csv("./data/obesity_and_ed.csv", function(d) {
      //parse columns
      return {
        state: d.State,
        rate: d["Obesity %"],
        education: d["BA or higher"],
        stateAbbr: d["State Abbr"]
      };
      //Use data
    }, function(data) {
      var w = 500;
      var h = 500;
      var barPadding = 1;
      
      console.log(data);

     /* d3.select("body").selectAll("div")
        .data(data)
        .enter()
        .append("div")
        .attr("class", "bar-obesity")
        .style("height", function(data) {
          //console.log(data.rate);

          return data.rate * 5 + "px";
        });*/

      svg.selectAll("rect")
        .data(data)
        .enter()
        .append("rect")
        .attr("x", function(data, i) {
            return i * (w / data.length);
          })
        .attr("y", function(data) {
            return h - (data.rate * 4);
          })
        .attr("width", "5")
        .attr("height", function(data) {
        return data.rate;
      });
      
      svg.selectAll("rect")
    .data(data)
    .enter()
    .append("rect")
 .attr("x", 0)
 .attr("y", 0)
 .attr("width", 20)
 .attr("height", 100);

      
        /*.attr({
          x: function(data, i) {
            return i * (w / data.length);
          },
          y: function(data) {
            return h - (data.rate * 4);
          },
          width: w / data.length - barPadding,
          height: function(data) {
            return data.rate * 4;
            console.log(data.rate);
          },
          fill: function(data) {
            return "rgb(0, 0, " + (data.rate * 10) + ")";
          }
        });*/

    });

  </script>
</body>

</html>
