<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Kern HW3</title>
  <script src="http://d3js.org/d3.v4.min.js" charset="utf-8"></script>
  <style>
    .bar-obesity {
      fill: orangered;
      display: inline-block;
      margin: 0px 2px 0px 0px;
    }
    
    .bar-edu {
      fill: darkblue;
      display: inline-block;
      margin: 0px 2px 0px 0px;
    }

  </style>
</head>

<body>
  <script type="text/javascript">
    //create svg
    var svg = d3.select("body")
      .append("svg")
      .attr("width", 800)
      .attr("height", 500);

    //load in csv data
    d3.csv("./data/obesity_and_ed.csv", function(d) {
      //parse columns
      return {
        state: d.State,
        rate: d["Obesity %"],
        education: d["BA or higher"],
        stateAbbr: d["State Abbr"]
      };
      //Use data
    }, function(data) {
      var w = 800;
      var h = 500;
      var barPadding = 1;

      console.log(data.length);

      svg.selectAll("rect")
        .data(data)
        .enter()
        .append("rect")
        .attr("class", "bar-obesity")
        .attr("x", function(data, i) {
          //console.log(data.education);
          return i * (w / 52);
        })
        .attr("y", function(data) {
          return h - data.rate * 4;
        })
        .attr("width", w / 52 - barPadding)
        .attr("height", function(data) {
          return data.rate * 4;
        });

    });

    //load in csv data
    d3.csv("./data/obesity_and_ed.csv", function(d) {
      //parse columns
      return {
        state: d.State,
        rate: d["Obesity %"],
        education: d["BA or higher"],
        stateAbbr: d["State Abbr"]
      };
      //Use data
    }, function(data) {
      var w = 800;
      var h = 500;
      var barPadding = 1;
      var y = d3.scaleLinear().range([h, 0]);

      console.log(data.length);

      svg.selectAll("rect")
        .data(data)
        .enter()
        .append("rect")
        .attr("class", "bar-edu")
        .attr("x", function(data, i) {
          //console.log(data.education);
          return i * (w / 52);
        })
        .attr("y", function(data) {
          return h - data.education * 4;
        })
        .attr("width", w / 52 - barPadding)
        .attr("height", function(data) {
          return data.education * 4;
        });

      y.domain([0, d3.max(data, function(d) { return d.close; })]);
      
      // Add the y Axis
  svg.append("g")
      .call(d3.axisLeft(y));

  // text label for the y axis
  svg.append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 0 - 70)
      .attr("x",0 - (h / 2))
      .attr("dy", "1em")
      .style("text-anchor", "middle")
      .text("Value");

    });

  </script>
  
  <h2>
    HW3: Lucas Kern
  </h2>
  
  <p>
    Description: Ideally would show both obesity rate and education rate as a double
    bar graph that you can hover over and fade between the two data sets and scale to fit or out of 100.
    
    Nothing is working and I am at a loss, I am missing some core understanding of D3.
    
    Hooray!
  </p>
</body>

</html>
